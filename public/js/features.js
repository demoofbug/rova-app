document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".story-step"),t=document.querySelector(".story-visuals-panel"),s=t.querySelector(".desktop-mockup img"),c=t.querySelector(".phone-mockup .screen"),o=t.querySelector(".tablet-mockup img");function r(e){const r=e.dataset.visual,a=e.dataset.img;if(t.querySelectorAll(".device-mockup").forEach(e=>e.classList.remove("active")),"desktop"===r){t.querySelector(".desktop-mockup").classList.add("active"),a&&(s.src=a)}else if("phone"===r){t.querySelector(".phone-mockup").classList.add("active"),a&&(c.style.backgroundImage=`url(${a})`,"true"===e.dataset.scroll?c.classList.add("scrolling"):c.classList.remove("scrolling"))}else if("tablet"===r){t.querySelector(".tablet-mockup").classList.add("active"),a&&(o.src=a)}}const a=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(e.forEach(e=>e.classList.remove("active")),t.target.classList.add("active"),r(t.target))})},{rootMargin:"0px 0px -50% 0px",threshold:.5});e.forEach(e=>{a.observe(e)}),e.length>0&&(r(e[0]),e[0].classList.add("active"))});